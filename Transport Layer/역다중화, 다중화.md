
### 전송 계층(Transport Layer)이란?
전송 계층은 OSI 7 계층 중 네 번째 계층으로, 네트워크 계층에서 온 메시지를 응용 프로그램으로 전달하고, 반대로 응용 프로그램에서 온 메시지를 네트워크 계층으로 전달하는 역할을 수행합니다. 전송 계층은 통신하는 두 시스템 간에 데이터를 효율적으로 전송하고 관리하는 중요한 기능을 제공합니다.

#### 주요 기능
1. **네트워크와 애플리케이션 간의 연결**: 네트워크 계층은 메시지를 한 시스템에서 다른 시스템으로 전송하며, 전송 계층은 이러한 메시지를 해당 시스템 내의 올바른 애플리케이션에 전달합니다.
2. **애플리케이션 간의 논리적 데이터 전달**: 전송 계층은 특정 애플리케이션에서 다른 시스템의 특정 애플리케이션으로 데이터를 직접 전송할 수 있는 추상화를 제공합니다.
3. **데이터 세분화(Segmentation)**: 데이터를 작은 조각으로 나누어 전송하며, 이를 '세그먼트' 또는 '데이터그램'이라고 합니다.
4. **다중 대화 지원**: 여러 응용 프로그램 간의 연결을 개별적으로 관리하여 동시에 여러 통신을 수행할 수 있도록 지원합니다.
5. **다중화 및 역다중화(Multiplexing & Demultiplexing)**: 하나의 네트워크 연결을 여러 응용 프로그램이 공유하고, 수신된 데이터가 정확히 해당 애플리케이션으로 전달되도록 보장합니다.

### 다중화(Multiplexing)와 역다중화(Demultiplexing)
전송 계층에서 **다중화**와 **역다중화**는 여러 응용 프로그램이 하나의 네트워크 연결을 통해 동시에 데이터를 전송하고 수신할 수 있도록 하는 중요한 기능입니다.

- **다중화(Multiplexing)**: 여러 응용 프로그램이 하나의 네트워크 연결을 공유하며 데이터를 전송할 수 있게 해주는 과정입니다. 예를 들어, 한 컴퓨터에서 웹 브라우저와 이메일 클라이언트가 동시에 데이터를 전송할 수 있도록 UDP나 TCP는 각 애플리케이션에 고유한 포트를 할당하여 다중화합니다.
  
- **역다중화(Demultiplexing)**: 여러 데이터그램이 수신되었을 때, 목적지 포트 번호를 기준으로 해당 데이터를 올바른 애플리케이션에 전달하는 과정입니다. 마치 우체국이 소포를 도착지 주소에 따라 각 집으로 배달하는 것과 같습니다.

### UDP에서의 다중화와 역다중화
UDP는 **연결 없는 통신 방식**을 사용하며, 데이터를 빠르게 전송하기 위해 다중화와 역다중화 기능을 제공합니다.

#### 포트(Ports)란?
- **포트 번호**는 네트워크 통신에서 소켓을 식별하기 위해 사용됩니다.
  - 소켓은 **IP 주소**와 **16비트 포트 번호**의 조합으로 구성되며, 포트 번호는 **0부터 65,535**까지의 범위를 가집니다.
  - **0~1023**번 포트는 **잘 알려진 포트(well-known ports)**로 예약되어 있으며, 예를 들어 **포트 80**은 HTTP, **포트 22**는 SSH에 사용됩니다.

#### UDP에서의 다중화(Multiplexing)
- UDP에서 다중화는 여러 응용 프로그램이 하나의 네트워크를 통해 데이터를 전송할 수 있게 합니다. 
- 데이터를 전송할 때, UDP는 **출발지 포트 번호**와 **목적지 포트 번호**를 데이터그램에 포함하여 전송합니다. 이렇게 함으로써 여러 응용 프로그램의 데이터를 동시에 처리할 수 있습니다.

#### UDP에서의 역다중화(Demultiplexing)
- 수신된 데이터그램이 **목적지 포트 번호**를 통해 각 애플리케이션으로 전달되는 과정입니다.
- 데이터그램이 수신 호스트에 도착하면, 전송 계층은 목적지 포트 번호를 확인하고 해당 데이터를 적절한 소켓으로 전달하여 올바른 응용 프로그램으로 연결합니다.

#### 포트 할당 방식
- **클라이언트 측 포트 할당**:
  - UDP에서 클라이언트는 주로 **동적으로 포트**를 할당합니다.
  - 클라이언트는 서버와의 통신을 위해 서버의 고정된 포트 번호를 알아야 하지만, 서버는 클라이언트의 포트 번호를 미리 알 필요는 없습니다. 첫 번째 데이터그램에 클라이언트의 포트 번호가 포함되어 있기 때문에 서버는 이를 사용해 클라이언트로 응답할 수 있습니다.
  
- **서버 측 포트 할당**:
  - 서버는 주로 고정된 포트를 사용하며, 이를 통해 클라이언트들이 서버와 통신할 수 있습니다. 예를 들어, **HTTP 서버**는 **포트 80**을 사용하여 클라이언트와의 통신을 처리합니다.

### 요약
- **전송 계층(Transport Layer)**은 네트워크 계층에서 받은 메시지를 올바른 응용 프로그램에 전달하는 역할을 하며, 네트워크와 애플리케이션 간의 연결을 담당합니다.
- **다중화(Multiplexing)**는 여러 응용 프로그램이 네트워크를 통해 데이터를 동시에 전송할 수 있도록 하는 기능입니다.
- **역다중화(Demultiplexing)**는 수신된 데이터를 목적지 포트 번호에 따라 올바른 애플리케이션에 전달하는 기능입니다.
- **UDP(User Datagram Protocol)**는 연결 없는 통신 방식을 사용하여 다중화와 역다중화를 지원하며, 포트 번호를 통해 여러 애플리케이션의 데이터를 구분하여 빠르게 전송할 수 있도록 합니다.